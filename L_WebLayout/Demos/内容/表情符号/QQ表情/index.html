<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="author" content="QQ Face">
    <meta name="weburl" content="#">
    <title>QQ Face</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.qqFace.js"></script>
</head>
<body>
<div id="show"></div>
<div class="comment">
    <div class="com_form">
        <textarea class="input" id="ta_content" name="ta_content"></textarea>
        <p>
            <input type="button" class="sub_btn" value="提交">
            <span class="emotion">: )</span>
        </p>
    </div>
</div>
</body>
</html>
<script type="text/javascript">
    $(function () {
        $('.emotion').qqFace({
            id: 'qq_faces',
            assign: 'ta_content',  //目标img要输出的控件id
            path: 'arclist/'    //表情存放的路径
        });

        $(".sub_btn").click(function () {
            var str = $("#ta_content").val();
            $("#show").html(replace_em(str));
        });

    });

    //查看结果
    function replace_em(str) {
        str = str.replace(/\</g, '&lt;');
        str = str.replace(/\>/g, '&gt;');
        str = str.replace(/\n/g, '<br/>');
        str = str.replace(/\[em_([0-9]*)\]/g, '<img src="arclist/$1.gif" border="0" />');
        return str;
    }

</script>
