<html>
 <title>弹幕模拟</title>
 <meta name="viewport" content="width=device-width,initial-scale=1 user-scalable=0">
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta  http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta http-equiv="description" content="This is my page">
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<link rel="stylesheet" type="text/css" href="css/total.css">
	
 <body>
  <div> 
   <!-- <input type="button" value="test" onclick="bar()" class="button_ita" />  -->
   <form action="" method="post" id="f2"> 
    <input type="text" name="name" placeholder="输入内容" class="txt large" id="txtbar" /> 
    <input type="button" class="button_ita" value="发送" onclick="pub()" /> 
   </form> 
   <div id="Barrage"> 
   <!-- <div class="m"> <img src="img/reward.png" class="journal-reward" /> </div> -->
    <ul> 
    <li ></li>
    </ul> 
   </div> 

  </div>
 </body>
<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
   <script type="text/javascript" src="js/data.js"></script>
   <script type="text/javascript">
  
   		var a = $(".BarMes").size();
       var height=($("li").height()+10)*8;
       $("#Barrage").css("height",height);
 function pub() {
    var str = $("#txtbar").val();
    /* $("ul").append("<li><div class='BarMes'>"+str+"</div></li>"); */
    if (str == "") {
        alert("输入内容");
    } else {
                    alert("发布成功");
                $("ul").append("<li><img src='' class='img'><div class='BarMes'>" + str + "</div></li>");
/*         $.ajax({
            url: "http://localhost/Ehcache/insert",
            type: "post",
            data: $("#f2").serialize(),
            async: false,
            success: function(st) {

            }
        }); */
    }
}	
	 setTimeout(function() {
	 $("ul li:eq(8)").slideUp(10);
	    },
	    1000);
		 setInterval(function() {
		    bar();
		},
		2000); 
function bar() {
	$("ul li:eq(8)").slideDown(1000);
	$("ul li:eq(0)").animate({ "margin-top": "-42px"},"slow");
    setTimeout(function() {
        $("ul li:eq(0)").remove();
        $("ul li:eq(8)").slideUp(10);
    },
    1000);
    if ($("li").size() <= 9) {
        add(); //玩完了再去去一下
    }
   // console.log($("li").size());
   	var height=($("li").height()+10)*$("li").size();
	//console.log("height:"+($("li").height()+10)+"size:"+$("li").size());
}

</script>
</html>