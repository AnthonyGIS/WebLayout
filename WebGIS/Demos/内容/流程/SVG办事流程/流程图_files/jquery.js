var jMask=(function($,undefined){var MaskClass=function(options){var self=this;this.cfg=$.extend({zIndex:1024,resizable:true},options);this.element=$('<div class="j-dialog-mask '+(this.cfg.className||'')+'"/>').appendTo(document.body).css({'display':'none','zIndex':this.cfg.zIndex,'width':this.width(),'height':this.height()});if(this.cfg.show){this.show();}
this.resizeFunc=function(){self.css("width",self.width());self.css("height",self.height());self.triggerHandler('resize');};if(this.cfg.resizable){$(window).bind('resize',this.resizeFunc);}};MaskClass.prototype={constructor:MaskClass,show:function(){this.element.show.apply(this.element,arguments);this._processTages(1);},hide:function(){this.element.hide.apply(this.element,arguments);this._processTages(0);},width:function(){return $('body').width();},height:function(){return Math.max($('body').height(),$(window).height());},css:function(){this.element.css.apply(this.element,arguments);},triggerHandler:function(){this.element.triggerHandler.apply(this.element,arguments);},bind:function(){this.element.bind.apply(this.element,arguments);},remove:function(){this._processTages(0);this.element&&this.element.remove();$(window).unbind('resize',this.resizeFunc);for(var i in this)
delete this[i];},_processTages:function(isHide){var self=this;var userAgent=navigator.userAgent.toLowerCase();var isMSIE=/msie/.test(userAgent)&&!/opera/.test(userAgent);if(!isMSIE){return;}
self.special=self.special||[];if(isHide){if(self.special.length>0)
return;var doms=$("SELECT");if(this.cfg.safety){doms=doms.filter(function(index){return self.cfg.safety.find(this).length==0;});}
doms.each(function(){var obj=$(this);self.special.push({dom:this,css:obj.css('visibility')});obj.css('visibility','hidden');})}
else{for(var i=0,len=self.special.length;i<len;i++){$(self.special[i].dom).css('visibility',self.special[i].css||'');self.special[i].dom=null;}}}};var _init=function(options){return new MaskClass(options);}
return{init:_init};})(jQuery);